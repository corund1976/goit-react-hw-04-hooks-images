(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,a,t){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem___yqG4",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1ONgd"}},13:function(e,a,t){e.exports={Button:"Button_Button__2mVST",buttonWrapper:"Button_buttonWrapper__bQwcK"}},14:function(e,a,t){e.exports={Overlay:"Modal_Overlay__1LuRk",Modal:"Modal_Modal__31Pib"}},28:function(e,a,t){e.exports={container:"Container_container__2d7w9"}},29:function(e,a,t){e.exports={ImageGallery:"ImageGallery_ImageGallery__2BYys"}},31:function(e,a,t){e.exports={Loader:"Loader_Loader__3mdQq"}},4:function(e,a,t){e.exports={Searchbar:"Searchbar_Searchbar__3kkOy",SearchForm:"Searchbar_SearchForm__3AZhF",SearchForm_button:"Searchbar_SearchForm_button__28WrT",SearchForm_button__label:"Searchbar_SearchForm_button__label__St24_",SearchForm_input:"Searchbar_SearchForm_input__1ifGI"}},41:function(e,a,t){},83:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(24),c=t.n(o),i=(t(41),t(34)),s=t(15),l=t(25),u=t(26),m=t(35),d=t(32),h=t(11),g=t.n(h),b=t(27),f=t(9),_=t.n(f);_.a.defaults.baseURL="https://pixabay.com/api/";var j=function(e,a){return _.a.defaults.params={key:"23749479-af26a543787f3771d684a474e",q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",page:a,per_page:12}};function p(e,a){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(g.a.mark((function e(a,t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(a,t),e.next=3,_.a.get().then((function(e){return e.data.hits})).catch((function(e){return console.log("error: ",e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=t(28),v=t.n(O),I=t(0);var y=function(e){var a=e.children;return Object(I.jsx)("div",{className:v.a.container,children:a})},x=t(33),w=t(4),M=t.n(w);var L=function(e){var a=e.onSubmit,t=Object(n.useState)(""),r=Object(x.a)(t,2),o=r[0],c=r[1],i=function(){return c("")};return Object(I.jsx)("header",{className:M.a.Searchbar,children:Object(I.jsxs)("form",{className:M.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==o.trim()?(a(o),i()):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430...")},children:[Object(I.jsx)("button",{type:"submit",className:M.a.SearchForm_button,children:Object(I.jsx)("span",{className:M.a.SearchForm_button__label,children:"Search"})}),Object(I.jsx)("input",{className:M.a.SearchForm_input,type:"text",value:o,onChange:function(e){return c(e.target.value)},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},k=t(36),F=t(12),N=t.n(F);var G=function(e){var a=e.image,t=a.webformatURL,n=a.largeImageURL,r=a.tags,o=e.onShowModal;return Object(I.jsx)("li",{className:N.a.ImageGalleryItem,onClick:function(){return o({modalImage:{largeImageURL:n,tags:r}})},children:Object(I.jsx)("img",{src:t,alt:r,className:N.a.ImageGalleryItem_image})})},C=t(29),T=t.n(C);var B=function(e){var a=e.images,t=e.onShowModal;return Object(I.jsx)("ul",{className:T.a.ImageGallery,children:a.map((function(e){var a=e.id,n=Object(k.a)(e,["id"]);return Object(I.jsx)(G,{image:n,onShowModal:t},a)}))})},E=t(13),R=t.n(E),U=function(e){var a=e.onLoadMore;return Object(I.jsx)("div",{className:R.a.buttonWrapper,children:Object(I.jsx)("button",{type:"button",className:R.a.Button,onClick:a,children:"Load more..."})})},H=t(30),q=t.n(H),W=(t(82),t(31)),D=t.n(W);var A=function(){return Object(I.jsx)(q.a,{className:D.a.Loader,type:"MutatingDots",color:"#3f51b5",height:100,width:100,timeout:3e3})},J=t(14),P=t.n(J);var Q=function(e){var a=e.modalImage,t=e.onToggleModalStatus;Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[]);var r=function(e){"Escape"===e.code&&t()},o=a.largeImageURL,c=a.tags;return Object(I.jsx)("div",{className:P.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(I.jsx)("div",{className:P.a.Modal,children:Object(I.jsx)("img",{src:o,alt:c})})})},z=(t(83),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={search:"",images:[],pagination:1,error:null,isLoading:!1,modalImage:{},modalIsHidden:!0},e.loadImages=function(a){var t=e.state,n=t.images,r=t.search;e.setState({pagination:a,error:null,isLoading:!0}),p(r,a).then((function(a){if(0===a.length)return Promise.reject(new Error("There is no pictures by ".concat(r," name, please try another request")));e.setState({images:[].concat(Object(s.a)(n||[]),Object(s.a)(a))})})).catch((function(a){return e.setState({error:a})})).finally((function(){return e.setState({isLoading:!1})}))},e.handleFormSubmit=function(a){e.setState({search:a})},e.handleToggleModalStatus=function(){e.setState((function(e){return{modalIsHidden:!e.modalIsHidden}}))},e.handleShowModalClick=function(a){var t=a.modalImage;e.setState({modalImage:Object(i.a)({},t)}),e.handleToggleModalStatus()},e.handleLoadMoreClick=function(){e.loadImages(e.state.pagination+1)},e}return Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,a){var t=this;a.search!==this.state.search&&this.setState({images:[]},(function(){t.loadImages(1)})),this.state.pagination>1&a.images!==this.state.images&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,a=e.images,t=e.isLoading,n=e.error,r=e.modalImage,o=e.modalIsHidden,c=this.handleFormSubmit,i=this.handleShowModalClick,s=this.handleToggleModalStatus,l=this.handleLoadMoreClick;return Object(I.jsxs)(y,{children:[Object(I.jsx)(L,{onSubmit:c}),n&&Object(I.jsx)("h1",{children:n.message}),Object(I.jsx)(B,{images:a,onShowModal:i}),t&&Object(I.jsx)(A,{}),!!a.length&&!t&&Object(I.jsx)(U,{onLoadMore:l}),!o&&Object(I.jsx)(Q,{onToggleModalStatus:s,modalImage:r})]})}}]),t}(n.Component));c.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(z,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.f9ec0513.chunk.js.map